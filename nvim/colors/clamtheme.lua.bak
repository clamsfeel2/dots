local set = vim.api.nvim_set_hl
local api = vim.api

set(0, "Normal", { fg = "#D8DEE9", bg = "NONE" })
set(0, "CursorLineNr", { bold = true, fg = "#8FAEAE", bg = "NONE" })
set(0, "LineNr", { fg = "#4C566A", bg = "NONE" })
set(0, "CursorLine", { bg = "#3B4252" })

set(0, "String", { fg = "#A3BE8C" })
set(0, "todo", { fg = "#EBCB8B", bold = true })
set(0, "fix", { fg = "#E5C07B", bold = true })
set(0, "WordUnderCursor", { fg = "#EBCB8B" })
set(0, "CursorWord", { fg = "#EBCB8B" })
set(0, "ExtraWhitespace", { bg = "#BF616A" })

set(0, "NotifyBackground", { fg = "#ffffff", bg = "#414141" })
set(0, "NotifyBorder", { bg = "#000000" })

set(0, "IncSearch", { bold = true, fg = "#88A1BB", bg = "NONE" })
set(0, "Search", { bold = true, fg = "#88A1BB", bg = "NONE" })
set(0, "CurSearch", { bold = true, fg = "#88A1BB", bg = "NONE" })
set(0, "MatchParen", { bold = true, fg = "#2E3440", bg = "#EBCB8B" })

set(0, "SpellBad", { underline = true, fg = "#BF616A" })
set(0, "SpellCap", { underline = true, fg = "#5E81AC" })

set(0, "TabLine", { fg = "#D8DEE9", bg = "#3B4252", underline = false })
set(0, "TabLineSel", { fg = "#A3BE8C", bold = true })
set(0, "TabLineFill", { fg = "#434C5E", bold = true })
set(0, "Folded", { fg = "#D8DEE9", bg = "NONE", bold = true })
set(0, "FoldColumn", { fg = "#88C0D0", bg = "#3B4252" })
set(0, "VertSplit", { fg = "#4C566A" })

set(0, "Visual", { fg = "#2E3440", bg = "#EBCB8B" })
set(0, "Sneak", { fg = "#ECEFF4", bg = "#5E81AC" })
set(0, "SneakScope", { fg = "#ECEFF4", bg = "#5E81AC" })
set(0, "SneakLabel", { fg = "#ECEFF4", bg = "#5E81AC" })

set(0, "SignColumn", { bg = "NONE" })
set(0, "GitGutterAdd", { fg = "#A3BE8C" })
set(0, "GitGutterChange", { fg = "#EBCB8B" })
set(0, "GitGutterDelete", { fg = "#BF616A" })

set(0, "VimwikiTodo", { fg = "#EBCB8B" })
set(0, "VimwikiList", { fg = "#ffffff" })
set(0, "VimwikiLink", { fg = "#81A1C1" })

set(0, "NormalFloat", { bg = "#454C5C" })
set(0, "CocInlayHint", { fg = "#808080" })
set(0, "CocMenuSel", { fg = "#2E3440", bg = "#CA8A65" })
set(0, "CocUnusedHighlight", { undercurl = true, fg = "#A1C5E4" })
set(0, "PmenuSel", { fg = "#2E3440", bg = "#CA8A65" })
set(0, "PmenuSbar", { bg = "#3B4252" })
set(0, "PmenuThumb", { bg = "#CA8A65" })

set(0, "Comment", { fg = "#87A0BE", bold = true })
set(0, "Constant", { fg = "#CC8B66", underline = false })
set(0, "Special", { fg = "#B48EAD", bold = true })
set(0, "Identifier", { fg = "#88C0D0", underline = false })
set(0, "Statement", { fg = "#CC8B66", bold = true })
set(0, "PreProc", { fg = "#B48EAD", underline = false })
set(0, "Type", { fg = "#A3BE8C", underline = false })
set(0, "Underlined", { fg = "#B48EAD", underline = false })
set(0, "Error", { fg = "#ECEFF4", bg = "#BF616A", reverse = true })
set(0, "Function", { fg = "#88C0D0" })
set(0, "Number", { fg = "#CC8B66" })
set(0, "Boolean", { fg = "#CC8B66" })
set(0, "Float", { fg = "#CC8B66" })
set(0, "ColorColumn", { bg = "#3B4252", reverse = true })
set(0, "SpecialKey", { fg = "#5E81AC" })
set(0, "NonText", { fg = "#5E81AC", bold = true })
set(0, "Directory", { fg = "#A3BE8C", bold = true })
set(0, "ErrorMsg", { fg = "#ECEFF4", bg = "#3B4252" })
set(0, "MoreMsg", { fg = "#A3BE8C", bold = true })
set(0, "ModeMsg", { bold = true })
set(0, "Question", { fg = "#A3BE8C" })
set(0, "StatusLine", { bold = true, reverse = true })
set(0, "StatusLineNC", { reverse = true })
set(0, "Title", { fg = "#B48EAD", bold = true })
set(0, "VisualNOS", { bold = true, underline = false })
set(0, "WarningMsg", { fg = "#BF616A" })
set(0, "WildMenu", { fg = "#2E3440", bg = "#EBCB8B" })
set(0, "DiffAdd", { bg = "#5E81AC", bold = true })
set(0, "DiffChange", { bg = "#B48EAD", bold = true })
set(0, "DiffDelete", { fg = "#5E81AC", bg = "#434C5E", bold = true })
set(0, "DiffText", { bg = "#BF616A", bold = true, reverse = true })
-- set(0, "Conceal", { fg = "#D8DEE9", bg = "#4C566A" })
set(0, "Conceal", { fg = "#B48EAD", bg = "NONE" })
set(0, "SpellRare", { fg = "#D8DEE9", bg = "#B48EAD", reverse = true })
set(0, "SpellLocal", { fg = "#D8DEE9", bg = "#88C0D0", underline = false })
set(0, "CursorColumn", { fg = "#D8DEE9", bg = "#4C566A", reverse = true })
set(0, "ToolbarLine", { fg = "#D8DEE9", bg = "#4C566A", underline = false })
set(0, "ToolbarButton", { fg = "#2E3440", bg = "#ECEFF4", bold = true })
set(0, "Ignore", { fg = "#ffffff" })
set(0, "Added", { fg = "#A3BE8C" })
set(0, "Changed", { fg = "#5E81AC" })
set(0, "Removed", { fg = "#BF616A" })
set(0, "Conditional", { fg = "#CC8B66" })
set(0, "Repeat", { fg = "#CC8B66" })
set(0, "Label", { fg = "#CC8B66" })
set(0, "Operator", { fg = "#CC8B66" })
set(0, "Keyword", { fg = "#CC8B66" })
set(0, "Exception", { fg = "#CC8B66" })
set(0, "Include", { fg = "#B48EAD" })
set(0, "Define", { fg = "#B48EAD" })
set(0, "Macro", { fg = "#B48EAD" })
set(0, "PreCondit", { fg = "#B48EAD" })
set(0, "StorageClass", { fg = "#A3BE8C" })
set(0, "Structure", { fg = "#A3BE8C" })
set(0, "Typedef", { fg = "#A3BE8C" })
set(0, "Tag", { fg = "#B48EAD" })
set(0, "Delimiter", { fg = "#B48EAD" })
set(0, "SpecialComment", { fg = "#B48EAD" })
set(0, "Debug", { fg = "#B48EAD" })

-- Nvim Notify + Noice mini
set(0, "NotifyERRORBorder", { fg = "#BF616A" })
set(0, "NotifyWARNBorder", { fg = "#CC8B66" })
set(0, "NotifyINFOBorder", { fg = "#4F6752" })
set(0, "NotifyDEBUGBorder", { fg = "#8B8B8B" })
set(0, "NotifyTRACEBorder", { fg = "#4F3552" })
set(0, "NotifyERRORIcon", { fg = "#BF616A" })
set(0, "NotifyWARNIcon", { fg = "#F79000" })
set(0, "NotifyINFOIcon", { fg = "#A3BE8C" })
set(0, "NotifyDEBUGIcon", { fg = "#8B8B8B" })
set(0, "NotifyTRACEIcon", { fg = "#D484FF" })
set(0, "NotifyERRORTitle", { fg = "#BF616A" })
set(0, "NotifyWARNTitle", { fg = "#F79000" })
set(0, "NotifyINFOTitle", { fg = "#A3BE8C" })
set(0, "NotifyDEBUGTitle", { fg = "#8B8B8B" })
set(0, "NotifyTRACETitle", { fg = "#D484FF" })
set(0, "NotifyERRORBody", { link = "Normal" })
set(0, "NotifyWARNBody", { link = "Normal" })
set(0, "NotifyINFOBody", { link = "Normal" })
set(0, "NotifyDEBUGBody", { link = "Normal" })
set(0, "NotifyTRACEBody", { link = "Normal" })
set(1, "MyNotifyBackground", { bg = "NONE", fg = "#cdd6f4" })
set(0, "MyNotifyBorder", { fg = "#89b4fa", bg = "#ffffff" })
-- set(0, "MyNotifyBackground", { bg = "#282c34" })
-- set(0, "MyNotifyBorder", { fg = "#61afef", bg = "#282c34" })

set(0, "NoiceMini", { bg = "NONE", fg = "#ffffff" })
set(0, "NormalFloat", { bg = "NONE", fg = "#cdd6f4" })
set(0, "TaskKeyword", { fg = "#EBCB8B" })

-- Syntax Matching
vim.fn.matchadd("TaskKeyword", [[\v(TODO|FIXME|NOTE|HACK)]])

-- VIMWIKI/MARKDOWN HEADER COLORING
local header_colors = { "#EBCB8B", "#CC8B66", "#A3BE8C", "#B48EAD", "#88C0D0", "#81A1C1" }
-- Functions
local function apply_vimwiki_headers()
  for lvl, col in ipairs(header_colors) do
    -- colour the text
    api.nvim_set_hl(0, "VimwikiHeader" .. lvl, { fg = col })
    -- colour the leading hashes
    api.nvim_set_hl(0, "VimwikiHeader" .. lvl .. "Delimiter", { fg = col })
  end
end
local function match_vimwiki_headers()
  vim.fn.clearmatches()
  for lvl in ipairs(header_colors) do
    vim.fn.matchadd("VimwikiHeader" .. lvl, "^" .. string.rep("#", lvl) .. " .*", 100)
  end
end
-- Autocommands
local aug = api.nvim_create_augroup("ClamsVimwiki", { clear = true })
api.nvim_create_autocmd("ColorScheme", {
  group = aug,
  pattern = "*",
  callback = apply_vimwiki_headers,
})
api.nvim_create_autocmd("FileType", {
  group = aug,
  pattern = "vimwiki",
  callback = match_vimwiki_headers,
})
api.nvim_create_autocmd("User", {
  group = aug,
  pattern = "GoyoEnter",
  callback = match_vimwiki_headers,
})
